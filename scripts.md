1 урок - bash

    1. Есть скрипт:

    a=1
    b=2
    c=a+b
    d=$a+$b
    e=$(($a+$b))

        Какие значения переменным c,d,e будут присвоены?
        Почему?
        
```
c = a+b потому что переменным может быть присвоино целое число либо строка. Т.к. a+b не целое число, значит присвоилась строка.
d = 1+2 потому что переменная d не целочисленная, но т.к. перед a и b знак $, то с присвоилась строка значений a и b.
e = 3 потому что благодаря $(( )) происходит присвоение целочисленной суммы a и b в e.
```

2.    На нашем локальном сервере упал сервис и мы написали скрипт, который постоянно проверяет его доступность, записывая дату проверок до тех пор, пока сервис не станет доступным. В скрипте допущена ошибка, из-за которой выполнение не может завершиться, при этом место на Жёстком Диске постоянно уменьшается. Что необходимо сделать, чтобы его исправить:

    while ((1==1)
    do
    curl https://localhost:4757
    if (($? != 0))
    then
    date >> curl.log
    fi
    done
```
Т.к. в условии указано while ((1==1), то скрипт будет выполняться всегда. Нужно после date добавить break.
Оператор >> дописывает новые данные к уже существующим. Если нам этого не надо, то нужно использовать оператор > который удалит содержимое файла и запишет новым.
```

 3.   Необходимо написать скрипт, который проверяет доступность трёх IP: 192.168.0.1, 173.194.222.113, 87.250.250.242 по 80 порту и записывает результат в файл log. Проверять доступность необходимо пять раз для каждого узла.
```
#!/usr/bin/env bash
declare -i a
a=0
while (($a<5))
do 
curl 192.168.0.1:80
echo $? >> curl.log
curl 173.194.222.113:80
echo $? >> curl.log
curl 87.250.250.242:80
echo $? >> curl.log
let "a +=1"
done
```

4.    Необходимо дописать скрипт из предыдущего задания так, чтобы он выполнялся до тех пор, пока один из узлов не окажется недоступным. Если любой из узлов недоступен - IP этого узла пишется в файл error, скрипт прерывается
```
#!/usr/bin/env bash
ip_array=(192.168.0.1:80 173.194.222.113:80 87.250.250.242:80)
while ((1==1))
  do
  for i in ${ip_array[@]}
    do
    curl $i
    if (($? != 0))
      then
      echo $i > error
      break 2
    fi
  done
done

```
Дополнительное задание (со звездочкой*) - необязательно к выполнению

Мы хотим, чтобы у нас были красивые сообщения для коммитов в репозиторий. Для этого нужно написать локальный хук для git, который будет проверять, что сообщение в коммите содержит код текущего задания в квадратных скобках и количество символов в сообщении не превышает 30. Пример сообщения: [04-script-01-bash] сломал хук.
```
#!/usr/bin/env bash

while read line
    do
    # Skip comments
    if [ "${line:0:1}" == "#" ]
    then
        continue
    fi
    if [ ${#line} -ge 30 ]
    then
        echo "Комментарий коммита ограничен 30 символами."
        echo "Текущий комментарий коммита содержит ${#line} символов."
        echo "${line}"
        exit 1
    fi
    if [[ "${{line:0:1}" != *[* || "${{line:0:1}" != *]* ]]
    then
        echo "Коммит не содержит кода текущего задания"
        exit 1
    fi
done < "${1}"

exit 0

код другого студента:
#!/bin/bash
number=30
len=$(cat $1|wc -m)
if [[ $len -gt $number ]]
  then
  echo "Количество символов не должно превышать 30"
  exit 1
elif ! grep -qE '^(04-script-[0-9][0-9]-[a-z])' $1;
  then
  echo "Наименование коммита должно быть в формате [04-script-XX-XX]"
  exit 1
fi

```


2 урок - python
import subprocess  
import socket  
socket.gethostbyname('google.com')  
'64.233.164.101'  
socket.gethostbyname_ex('google.com')  
('google.com', [], ['64.233.164.100', '64.233.164.139', '64.233.164.138', '64.233.164.113', '64.233.164.102', '64.233.164.101'])  


